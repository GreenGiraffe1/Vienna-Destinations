<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<title>Neighborhood Map REFACTOR</title>
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<link rel="stylesheet" href="style.css">

	</head>
	<body>

		<div class="container">
	      	<div class="options-box">

	        	<h1>Vienna Vacation Destinations</h1>
	        	<div>
	          		<input id="show-listings" type="button" value="Show Listings">
	          		<input id="hide-listings" type="button" value="Hide Listings">
	           		<input type="checkbox" name="toggleMarkers" value="yes" checked>Show Markers?<br>
	           		<hr>
	           		<div class="list-class">

						<h3>Locations List:</h3>
						<ul data-bind="foreach: viennaList">
							<li data-bind="text: name"></li>
						</ul>


	               	</div>
	           	</div>
	        </div>
	     </div>
	     <div id="map"></div>

		 <script
         src="https://maps.googleapis.com/maps/api/js?key=AIzaSyC1mSv0XTcysnwSGaJCjUUbm-eMtFNEZGs&v=3&callback=ViewModel">
     	</script>

		<script src="https://cdnjs.cloudflare.com/ajax/libs/knockout/3.4.1/knockout-min.js"></script>



		<script>

			var ViennaModel = {
	            locations: [
	                {
	                    name: 'WW2 Flak Tower',
	                    coordinates: {lat: 48.22563, lng: 16.372815},
	                    wikiPageID: 1369643,
	                    officialWikiTitle: null
	                },
	                {
	                    name: 'Vienna Rose Garden',
	                    coordinates: {lat: 48.208056, lng: 16.361111},
	                    wikiPageID: 22533198,
	                    officialWikiTitle: null

	                },
	                {
	                    name: "Mozart's House",
	                    coordinates: {lat: 48.207778, lng: 16.375278},
	                    wikiPageID: 28369776,
	                    officialWikiTitle: null
	                },
	                {
	                    name: 'Sch√∂nbrunn Palace',
	                    coordinates: {lat: 48.184516, lng: 16.311865},
	                    wikiPageID: 165202,
	                    officialWikiTitle: null
	                },
	                {
	                    name: 'Vienna Opera House',
	                    coordinates: {lat: 48.202778, lng: 16.369111},
	                    wikiPageID: 379066,
	                    officialWikiTitle: null
	                },
	                {
	                    name: 'Hofburg Palace',
	                    coordinates: {lat: 48.206507, lng: 16.365262},
	                    wikiPageID: 1651794,
	                    officialWikiTitle: null
	                },
	                {
	                    name: 'Museum of Military History',
	                    coordinates: {lat: 48.185278, lng: 16.3875},
	                    wikiPageID: 2680555,
	                    officialWikiTitle: null
	                }
	            ]
	        };



			// var map;
        	function initMap() {
	            // Constructor creates a new map - only center and zoom are required.
	            var map = new google.maps.Map(document.getElementById('map'), {
	                center: {lat: 48.205, lng: 16.366667},
	                zoom: 13,
	                mapTypeControl: false
	            });

	            // Create a new blank array for all the listing markers.
	            // var markers = [];

	            // var infoWindow = new google.maps.InfoWindow({
	            // });
			}


			var ViewModel = function() {
				// http://knockoutjs.com/documentation/computedObservables.html#managing-this
				var self = this;

				self.viennaList = ko.observableArray();
				for (var i = 0; i < ViennaModel.locations.length; i++) {
					self.viennaList.push(ViennaModel.locations[i]);
					// console.log(self.viennaList()[i]['name']);  //  This confirms that it works
				}

				initMap();

				// var markers = [];
				//
				// var infoWindow = new google.maps.InfoWindow({
	            // });
				//
				// //  Create map-markers, by looping through the "self.viennaList observable array"
				// for (var i = 0; i < self.viennaList.length; i++) {
				// 	var marker = new google.maps.Marker({
	            //         position: new google.maps.LatLng(self.viennaList()[i]['coordinates']['lat'], self.viennaList()[i]['coordinates']['lng']),
				// 		//.locations[i].coordinates.lat(), Model.locations[i].coordinates.lng()),
	            //         map: map
	            //         // title: Model.locations[i].name(),
	            //         // summaryID: Model.locations[i].wikiPageID(),
	            //         // id: i
	            //     });
	            //     //  Add each individual marker to the "markers" array
	            //     markers.push(marker);
				// }


			}

			var vm = new ViewModel();

			ko.applyBindings(vm);
			// ViewModel();




            // Create Map Markers by Looping through "locations" array
            // for (var i = 0; i < Model.locations.length; i++) {
                // var marker = new google.maps.Marker({
                //     position: new google.maps.LatLng(Model.locations[i].coordinates.lat(), Model.locations[i].coordinates.lng()),
                //     map: map,
                //     title: Model.locations[i].name(),
                //     summaryID: Model.locations[i].wikiPageID(),
                //     id: i
                // });
                //  Add each individual marker to the "markers" array
                // markers.push(marker);
			//
			//
            //     //  Set the animation for clicking on any map marker   TODO: Use this syntax for list-view items
            //     marker.addListener('click', function() {
            //         // this.setAnimation(google.maps.Animation.DROP);  //  Wow - all I had to do was change "marker" to "this"
            //         populateInfoWindow(this, infoWindow);  //  Call's the info-window function - will populate with right information
            //     });
            // }
			//
            // function toggleBounce() {
            //     if (marker.getAnimation() !== null) {
            //         marker.setAnimation(null);
            //     } else {
            //         marker.setAnimation(google.maps.Animation.BOUNCE);
            //     }
            // }

            // document.getElementById('show-listings').addEventListener('click', showListings);
            // document.getElementById('hide-listings').addEventListener('click', hideListings);

            // This function will loop through the markers array and display them all.
            // function showListings() {
            //   var bounds = new google.maps.LatLngBounds();
            //   // Extend the boundaries of the map for each marker and display the marker
            //   for (var i = 0; i < markers.length; i++) {
            //     markers[i].setMap(map);
            //     bounds.extend(markers[i].position);
            //   }
            //   map.fitBounds(bounds);
            // }
			//
            // // This function will loop through the listings and hide them all.
            // function hideListings() {
            //     for (var i = 0; i < markers.length; i++) {
            //         markers[i].setMap(null);
            //     }
            // }
			//
			// listPopulator(markers, infoWindow);

        // }
		</script>



	</body>
</html>
